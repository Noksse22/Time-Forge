<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeForge - Planificateur intelligent</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>TimeForge</h1>
            <p>Optimisez votre organisation quotidienne</p>
            <!-- Dark mode toggle -->
            <button id="darkModeToggle" class="btn btn-secondary btn-small" style="float:right;margin-top:-40px;" aria-label="Activer/désactiver le mode sombre" tabindex="0">
                Mode sombre
            </button>
        </div>
    </div>

    <main class="container" role="main">
        <aside class="left-panel" aria-label="Configuration et ajout de tâches">
            <section class="card config-card" aria-label="Configuration du temps">
                <h2>Mon temps aujourd'hui</h2>
                <div class="time-config" role="group" aria-label="Configuration du temps">
                    <!-- Removed availableHours input -->
                    <div class="form-group time-align-group">
                        <label for="startTime">Heure de début</label>
                        <input type="time" id="startTime" value="09:00" tabindex="0" aria-label="Heure de début">
                    </div>
                </div>
                <button class="btn generate-btn" onclick="generatePlanning()" aria-label="Créer mon planning" tabindex="0">
                    Créer mon planning
                </button>
                <button class="btn btn-secondary btn-small" id="resetPlanningBtn" style="margin-top:10px;" aria-label="Réinitialiser le planning" tabindex="0">
                    Réinitialiser le planning
                </button>
            </section>

            <section class="card add-task-card" aria-label="Ajout de tâche">
                <h2>Nouvelle tâche</h2>
                <form id="taskForm" autocomplete="off">
                    <div class="form-group">
                        <label for="taskTitle">Titre de la tâche</label>
                        <input type="text" id="taskTitle" placeholder="Ex: Réviser les mathématiques" required tabindex="0" aria-label="Titre de la tâche">
                    </div>
                    <div class="form-group">
                        <label for="taskDuration">Durée (minutes)</label>
                        <input type="number" id="taskDuration" value="60" required tabindex="0" aria-label="Durée de la tâche en minutes">
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">Niveau d'urgence</label>
                        <select id="taskPriority" required tabindex="0" aria-label="Niveau d'urgence">
                            <option value="high">Très important</option>
                            <option value="medium" selected>Important</option>
                            <option value="low">Moins prioritaire</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary btn-add" aria-label="Ajouter la tâche" tabindex="0">
                        Ajouter
                    </button>
                </form>
            </section>

            <section class="card data-card" aria-label="Import/Export">
                <h2>Mes données</h2>
                <div class="data-actions">
                    <button class="btn btn-secondary btn-small" onclick="exportData()" aria-label="Sauvegarder les données" tabindex="0">
                        Sauvegarder
                    </button>
                    <label for="importFile" class="btn btn-secondary btn-small" tabindex="0" aria-label="Importer des données">
                        Importer
                    </label>
                    <input type="file" id="importFile" class="file-input" accept=".json" onchange="importData(event)" tabindex="0" aria-label="Fichier d'import">
                    <button class="btn btn-secondary btn-small" onclick="loadSampleData()" aria-label="Charger un exemple" tabindex="0">
                        Exemple
                    </button>
                </div>
            </section>
        </aside>

        <section class="right-panel" aria-label="Planning et tâches">
            <section class="card planning-card" aria-label="Planning généré">
                <h2>Planning du jour</h2>
                <!-- Total planned time indicator -->
                <div id="totalPlannedTime" style="font-size:0.95em;color:#444;margin-bottom:8px;">
                    Temps total planifié : 0 min
                </div>
                <div id="timeline" class="timeline" tabindex="0" aria-label="Planning généré">
                    <div class="empty-state">
                        <div class="empty-icon"></div>
                        <h3>Pas encore de planning</h3>
                        <p>Configurez votre temps et créez votre planning personnalisé.</p>
                    </div>
                </div>
                <div id="planningActions" style="display:none; margin-top:16px; gap:1rem; flex-direction:row; align-items:center;">
                    <button class="btn btn-success btn-small" id="markCompletedBtn" aria-label="Terminer le planning" tabindex="0">
                        Terminer
                    </button>
                    <button class="btn btn-secondary btn-small" id="exportFinalBtn" aria-label="Exporter le planning final" tabindex="0" style="display:none;">
                        Exporter le planning final
                    </button>
                </div>
            </section>

            <section class="card tasks-card" aria-label="Liste des tâches">
                <h2>Liste des tâches (<span id="taskCount">0</span>)</h2>
                <!-- Clear all tasks button -->
                <button class="btn btn-secondary btn-small" id="clearTasksBtn" style="margin-bottom:10px;" aria-label="Tout effacer" tabindex="0">
                    Tout effacer
                </button>
                <div id="tasksList" class="tasks-list" tabindex="0" aria-label="Liste des tâches">
                    <div class="empty-state">
                        <div class="empty-icon"></div>
                        <h3>La liste est vide</h3>
                        <p>Ajoutez vos premières tâches ou chargez un exemple.</p>
                    </div>
                </div>
            </section>
        </section>
    </main>

    <!-- Back to top button -->
    <button id="backToTopBtn" title="Retour en haut" style="display:none;position:fixed;bottom:30px;right:30px;z-index:1000;" class="btn btn-secondary btn-small" aria-label="Retour en haut" tabindex="0">
        Haut
    </button>

    <footer class="footer">
        <p>© 2025 TimeForge - Libre de droit</p>
        <p>Créé par <a href="https://github.com/Noksse22" target="_blank" rel="noopener">Noksse</a></p>
    </footer>

    <script src="script.js"></script>
    <script>
        // Dark mode toggle logic
        document.getElementById('darkModeToggle').onclick = function() {
            document.body.classList.toggle('dark-mode');
        };
        // Back to top button logic
        const backToTopBtn = document.getElementById('backToTopBtn');
        window.onscroll = function() {
            backToTopBtn.style.display = window.scrollY > 200 ? 'block' : 'none';
        };
        backToTopBtn.onclick = function() {
            window.scrollTo({top:0, behavior:'smooth'});
        };
        // Clear all tasks logic (to be implemented in script.js)
        document.getElementById('clearTasksBtn').onclick = function() {
            if(confirm('Effacer toutes les tâches ?')) {
                if(window.clearAllTasks) clearAllTasks();
            }
        };
        // Reset planning logic (to be implemented in script.js)
        document.getElementById('resetPlanningBtn').onclick = function() {
            if(window.resetPlanning) resetPlanning();
        };
    </script>
</body>
</html>